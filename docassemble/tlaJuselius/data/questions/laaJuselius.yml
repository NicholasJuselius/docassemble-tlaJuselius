objects: 
  - user: Individual
  - cohabs: DAList.using(object_type=Individual)
 
---

mandatory: true
code: |
  set_info(user = user)
  
 
---


Question: |
  Do you live with anyone?
yesno: cohabs.there_are_any

---
question: |
  Do you live with anyone else?
yesno: cohabs.there_is_another

---

Generic Object: Individual
Question: |
  % if x==user:
  What is your name?
  % else:
  What is their name?
  % endif

# using the logic above because at this time, if I use some of the built in pronoun # functionality, will return e.g. "the first cohabs name" not "their name".

fields:
  - First Name: x.name.first
  - Last Name: x.name.last

---
question: |
  Do you qualify for Legal Aid?
  
yesno: can_help
  
---
# This presumes, of course, that the user has a pending court date. Will probably modify the time to be a MC between 9:30 and 2 or whatever.
question: |
  When is your next court date?
  
fields:
  - Date: courtDate
    datatype: date
  - Time: courtTime
    datatype: time
    

---
# I included one of the if statements twice only because I thought it was funny. 
mandatory: True
question: Your document is ready.
attachments:
  - name: Document
    filename: document
    content: |
      Thank you for your time, ${user.name.first}. We have determined your eligibility for Legal Aid for your ${ format_date(courtDate, format= 'MMMM dd') } court date. 
      
      You have told us that you currently live
      % if not cohabs:
      alone, 
      % else:
      with ${ cohabs },
      % endif
      and that you
      % if can_help:
      qualify for Legal Aid.
      % else: 
      do not qualify for Legal Aid.
      % endif
      
      Based on your responses, our complicated algorithm has determined
      % if can_help:
      that you qualify for Legal Aid at this time.
      % else:
      ,unfortunately, that you do not qualify for Legal Aid at this time. 
      % endif
      
      Please be advised that, notwithstanding this communication, you are still required to attend court on ${ format_date(courtDate, format= 'EEEE, MMMM, dd, yyyy') } at ${ format_time(courtTime, format= 'hh:mm a') }.
  